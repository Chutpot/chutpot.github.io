---
import Base from '../layouts/Base.astro';
import { getCollection } from 'astro:content';

const games = await getCollection('games');
games.sort((a, b) => {
  const dateA = a.data.releaseDate ? new Date(a.data.releaseDate).getTime() : 0;
  const dateB = b.data.releaseDate ? new Date(b.data.releaseDate).getTime() : 0;
  return dateB - dateA;
});
---

<Base title="Games — Chutpot Studio" description="Our released and in-development games.">
  <section class="mb-10 flex flex-col gap-4">
    <p class="text-sm font-semibold uppercase tracking-[0.2em] text-[color:var(--color-muted)]">Games</p>
    <h1 class="text-3xl font-semibold text-white sm:text-4xl">Worlds we’re building</h1>
    <p class="max-w-2xl text-base text-[color:var(--color-muted)]">
      Wishlist upcoming titles, follow development, and drop us feedback on what you want to see next.
    </p>
  </section>

  <section class="grid gap-6 md:grid-cols-2">
    {games.map(({ slug, data }) => (
      <a
        href={`/games/${slug}/`}
        class="group relative block overflow-hidden rounded-[var(--radius-xl)] bg-[color:var(--color-panel)] p-6 shadow-lg shadow-indigo-900/30 transition hover:-translate-y-1 hover:shadow-xl"
      >
        <div class="flex items-center gap-3 text-xs uppercase tracking-[0.25em] text-[color:var(--color-muted)]">
          <span>{data.releaseDate ? new Date(data.releaseDate).getFullYear() : 'TBA'}</span>
          <span class="h-px flex-1 bg-white/10"></span>
          <span>{data.platforms?.join(' • ')}</span>
        </div>
        <h2 class="mt-3 text-xl font-semibold text-white transition group-hover:text-[color:var(--color-brand-100)]">
          {data.title}
        </h2>
        <p class="text-sm text-[color:var(--color-muted)]">{data.tagline}</p>
        <p class="mt-2 text-[color:var(--color-muted)]">{data.description}</p>
        <span class="mt-4 inline-flex items-center gap-2 text-sm font-medium text-[color:var(--color-brand-100)]">
          View game
          <span aria-hidden="true">→</span>
        </span>
      </a>
    ))}
  </section>
</Base>
