---
import Base from '../layouts/Base.astro';
import { getCollection } from 'astro:content';

const projects = await getCollection('portfolio');

projects.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());
---

<Base title="Portfolio — Chutpot Studio" description="Selected design and engineering work.">
  <section class="mb-10 flex flex-col gap-4">
    <p class="text-sm font-semibold uppercase tracking-[0.2em] text-[color:var(--color-muted)]">Work</p>
    <h1 class="text-3xl font-semibold text-white sm:text-4xl">Selected projects</h1>
    <p class="max-w-2xl text-base text-[color:var(--color-muted)]">
      A few recent collaborations across product design, marketing sites, and frontend engineering.
    </p>
  </section>

  <section class="grid gap-6 md:grid-cols-2">
    {projects.map(({ slug, data }) => (
      <a
        href={`/portfolio/${slug}/`}
        class="group relative block overflow-hidden rounded-[var(--radius-xl)] bg-[color:var(--color-panel)] p-6 shadow-lg shadow-indigo-900/30 transition hover:-translate-y-1 hover:shadow-xl"
      >
        <div class="flex items-center gap-3 text-xs uppercase tracking-[0.25em] text-[color:var(--color-muted)]">
          <span>{new Date(data.date).getFullYear()}</span>
          <span class="h-px flex-1 bg-white/10"></span>
          <span>{data.tags?.join(' • ')}</span>
        </div>
        <h2 class="mt-3 text-xl font-semibold text-white transition group-hover:text-[color:var(--color-brand-100)]">
          {data.title}
        </h2>
        <p class="mt-2 text-[color:var(--color-muted)]">{data.description}</p>
        <span class="mt-4 inline-flex items-center gap-2 text-sm font-medium text-[color:var(--color-brand-100)]">
          View project
          <span aria-hidden="true">→</span>
        </span>
      </a>
    ))}
  </section>
</Base>
